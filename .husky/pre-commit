#!/bin/sh
echo "Husky: Running pre-commit hook..."

echo "Step 1: Running lint-staged..."
npx lint-staged
if [ $? -ne 0 ]; then
  echo "Lint-staged failed. Commit aborted."
  exit 1
fi

echo "Step 2: Running unit tests..."
npm run test
if [ $? -ne 0 ]; then
  echo "Unit tests failed. Commit aborted."
  exit 1
fi

echo "Step 3: Running build..."
npm run test:build
if [ $? -ne 0 ]; then
  echo "Build failed. Commit aborted."
  exit 1
fi

echo "All checks passed! Committing..."
